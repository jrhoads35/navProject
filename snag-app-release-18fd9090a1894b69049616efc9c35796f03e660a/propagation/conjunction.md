# Conjunction

The conjunction of two satellites is the point at which they come closest together; in other words, the local minimum of their separation distance. This is of interest when this distance is on the order of the uncertainty of the orbital position at that point, as this becomes a concern for possible collision.

## Function

The function `conjunction(primary_orbit, secondary_orbit, tstart, tend)` returns a timetable of conjunctions between two objects.

| Argument name     | Description                                                                                        |
|-------------------|----------------------------------------------------------------------------------------------------|
| `primary_orbit`   | Orbit of the primary and relative coordinate system reference                                      |
| `secondary_orbit` | Orbit of the secondary object                                                                      |
| `tstart`          | starting time (see [propagation](propagation.md#Input))                                            |
| `tend`            | ending time (see [propagation](propagation.md#Input))                                              |
| `force_model`     | force model parameters from [`force_model()`](#force-model), defaults to `constants.force_twobody` |

The orbits may be specified in any form acceptable to [`propagate()`](propagation.md#initial-state). If any have an additional field `force_model` generated by [`force_model()`](#force-model), the propagation for that orbit will use that force model. Otherwise, the final argument `force_model` is used. For space-track orbits, the force model is always ignored.

The returned [timetable](timetable.md) has the following columns

| Column            | Description                                                                                                                                                    |
|-------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `epoch`           | The [datetime](datetime.md) of closest approach                                                                                                                |
| `distance_m`      | The separation distance (meters) at the time of closest approach                                                                                               |
| `rel_position_m`  | Location of secondary in the primary's [TNW](https://www.orekit.org/static/apidocs/org/orekit/frames/LOFType.html#TNW) reference frame, meters                 |
| `rel_velocity_ms` | Relative velocity of secondry in the primary's  [TNW](https://www.orekit.org/static/apidocs/org/orekit/frames/LOFType.html#TNW) reference frame, meters/second |


## Example

In October 2020, two objects, a Russian satellite Cosmos 2004, and a spent Chinese rocket body CZ-4C R/B were reported to come very close together, and in advance of the event, with a significant probability of collision (they did not collide).

    cosmos = spacetrack_orbit(19826,datetime(2020,10,14),datetime(2020,10,18))
    cz4c = spacetrack_orbit(36123,datetime(2020,10,14),datetime(2020,10,18))
	tstart = datetime(2020,10,15,19,0,0);
	tend = datetime(2020,10,16,7,0,0);
	conj15d13h = conjunction(cosmos(2), cz4c(7), tstart, tend)
    conj15d20h = conjunction(cosmos(3), cz4c(8), tstart, tend)
    conj15d22h = conjunction(cosmos(4), cz4c(9), tstart, tend)

Another approach, converting to PVT (Cartesian state) and then propagation with an 8x8 force model

    cosmos = spacetrack_orbit(19826,datetime(2020,10,16,1,0,0));
    cz4c = spacetrack_orbit(36123,datetime(2020,10,16,1,0,0));
    synccocz = sync([cosmos; cz4c], datetime(2020,10,16,0,0,0));
    conj_fm = force_model(8,8);
    conj8x8 = conjunction(synccocz(1), synccocz(2), datetime(2020,10,16,0,0,0), datetime(2020,10,16,2,0,0), conj_fm);

To propagate Cosmos with a 4x4 model and CZ-4C with the 8x8, replace the last line with

	synccocz(1).force_model = force_model(4,4);
	conj4x4_8x8 = conjunction(synccocz(1), synccocz(2), datetime(2020,10,16,0,0,0), datetime(2020,10,16,2,0,0), conj_fm);
